{% extends 'adminapp/base.html' %}

{% block title %}Add Delivery Agent{% endblock %}

{% block admin_content %}
<div class="container-fluid">
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a href="{% url 'adminapp:index' %}">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="{% url 'adminapp:delivery_agents_list' %}">Delivery Agents</a></li>
        <li class="breadcrumb-item active">Add Delivery Agent</li>
    </ol>
    
    <div class="row">
        <div class="col-lg-8">
            <div class="card mb-4">                <div class="card-header">
                    <i class='bx bx-user-plus me-1'></i>
                    Create Delivery Agent Credentials
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        {% if form_error %}
                        <div class="alert alert-danger">
                            {{ form_error }}
                        </div>
                        {% endif %}
                        
                        {% if user_form.errors %}
                        <div class="alert alert-danger">
                            <ul>
                                {% for field in user_form %}
                                    {% for error in field.errors %}
                                        <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                                    {% endfor %}
                                {% endfor %}
                                {% for error in user_form.non_field_errors %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                        
                        <div class="alert alert-info">
                            <i class='bx bx-info-circle me-1'></i>
                            Create login credentials for a new delivery agent. They will complete their profile during the onboarding process.
                        </div>
                          <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="{{ user_form.email.id_for_label }}">Email Address <span class="text-danger">*</span></label>
                                    {{ user_form.email }}
                                    <small class="form-text text-muted">This email will receive onboarding instructions</small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="{{ user_form.phone.id_for_label }}">Phone Number <span class="text-danger">*</span></label>
                                    {{ user_form.phone }}
                                    <small class="form-text text-muted">Contact number for the delivery agent</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <div class="form-group mb-3">
                                    <label for="{{ user_form.fullname.id_for_label }}">Full Name <span class="text-danger">*</span></label>
                                    {{ user_form.fullname }}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="{{ user_form.username.id_for_label }}">Username <span class="text-danger">*</span></label>
                                    {{ user_form.username }}
                                    <small class="form-text text-muted">Will be used for login</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="{{ user_form.password1.id_for_label }}">Password <span class="text-danger">*</span></label>
                                    {{ user_form.password1 }}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label for="{{ user_form.password2.id_for_label }}">Confirm Password <span class="text-danger">*</span></label>
                                    {{ user_form.password2 }}
                                </div>
                            </div>
                        </div>
                          <div class="mt-4 mb-3">
                            <button type="submit" class="btn btn-primary">
                                <i class='bx bx-user-plus'></i> Create Delivery Agent Account
                            </button>
                        </div>
                        
                        <div class="alert alert-warning">
                            <i class='bx bx-bulb me-1'></i>
                            <strong>Note:</strong> After account creation, the delivery agent will receive an email with instructions to complete their profile during onboarding.
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header">
                    <i class='bx bx-info-circle me-1'></i>
                    Information
                </div>
                <div class="card-body">
                    <h5>New Onboarding Process</h5>
                    <p>The delivery agent onboarding process now follows these steps:</p>
                    <ol class="mb-4">
                        <li>Admin creates initial account credentials</li>
                        <li>Agent receives email with login instructions</li>
                        <li>Agent completes their profile with:
                            <ul>
                                <li>Vehicle information</li>
                                <li>Identity documents</li>
                                <li>Profile picture</li>
                                <li>Delivery zone preferences</li>
                            </ul>
                        </li>
                        <li>Admin approves completed profile</li>
                        <li>Agent completes orientation training</li>
                        <li>Agent begins accepting delivery assignments</li>
                    </ol>
                    
                    <div class="alert alert-info">
                        <i class='bx bx-check-circle me-1'></i>
                        Completed profiles appear in the "Pending Approval" section of the delivery agents dashboard.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function() {
        // Add Bootstrap's form-control class to all input fields
        $('input, select, textarea').addClass('form-control');
    });
</script>
{% endblock %} 